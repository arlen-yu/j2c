define(function(){"use strict";function e(e,n){for(var r in n)b.call(n,r)&&(!r.indexOf("$")||r in e||(e[r]=n[r]));return e}function n(e,n){var r,t,l=[];for(t in n)if(b.call(n,t))for(r in e)b.call(e,r)&&l.push(e[r]+n[t]);return l}function r(e){for(var n,r=[],t=[],l=0;n=A.exec(e);)switch(n[0]){case"(":l++;break;case")":l--;break;case",":if(l)break;r.push(n.index)}for(n=r.length;n--;)t.unshift(e.slice(r[n]+1)),e=e.slice(0,r[n]);return t.unshift(e),t}function t(e,r){for(var t,l,a=[],i=[];l=Z.exec(e);)"&"==l[0]&&a.push(l.index);for(l=a.length;l--;)i.unshift(e.slice(a[l]+1)),e=e.slice(0,a[l]);for(i.unshift(e),1===i.length&&i.unshift(""),t=[i[0]],l=1;l<i.length;l++)t=n(t,n(r,[i[l]]));return t.join(",")}function l(e){return function n(r){if(d.call(r)===_)for(var t=0;t<r.length;t++)n(r[t]);else e(r)}}function a(e){for(;k.length<e;)k+=Math.floor(4294967296*Math.random()).toString(36);var n="_"+k.slice(0,e);return k=k.slice(e),n}function i(e){return"-"+e.toLowerCase()}function u(e,n,r,t,l){var a,c,s;if(null!=t)switch(d.call(t=t.valueOf())){case _:for(a=0;a<t.length;a++)u(e,n,r,t[a],l);break;case z:r=r&&r+"-";for(a in t)if(b.call(t,a))if(c=t[a],/\$/.test(a))for(s in a=a.split("$"))b.call(a,s)&&u(e,n,r+a[s],c,l);else u(e,n,r+a,c,l);break;default:if(!r)return n.raw(t);a=r.replace(/_/g,"-").replace(/[A-Z]/g,i),!l||"animation-name"!=a&&"animation"!=a&&"list-style"!=a||(t=t.split(",").map(function(n){return n.replace(/^\s*(?:(var\([^)]+\))|:?global\(\s*([_A-Za-z][-\w]*)\s*\)|()(-?[_A-Za-z][-\w]*))/,e.localizeReplacer)}).join(",")),n.decl(a,t)}}function c(e,n,r,t,a,i,c){for(var o=0;o<e.atruleHandlers.length;o++)if(e.atruleHandlers[o](e,n,r,t,a,i,c))return;if(!r[3]&&/^global$/.test(r[2]))s(e,n,a,t,0,c);else if(!r[3]&&/^local$/.test(r[2]))s(e,n,a,t,1,c);else if(r[3]&&/^adopt$/.test(r[2])){if(!i||c)return n.err("@adopt global or nested: "+r[0]);if(!/^\.?[_A-Za-z][-\w]*$/.test(r[3]))return n.err("bad adopter "+JSON.stringify(r[3])+" in "+r[0]);o=[],l(function(e,t){null!=e&&/^\.?[_A-Za-z][-\w]*(?:\s+\.?[_A-Za-z][-\w]*)*$/.test(t=e+"")?o.push(t.replace(/\./g,"")):n.err("bad adoptee "+JSON.stringify(e)+" in "+r[0])})(t),o.length&&(e.localize(r[3]=r[3].replace(/\./g,"")),e.names[r[3]]+=" "+o.join(" "))}else!r[3]&&/^(?:namespace|import|charset)$/.test(r[2])?l(function(e){n.atrule(r[1],r[2],e)})(t):!r[3]&&/^(?:font-face|viewport)$/.test(r[2])?l(function(t){n.atrule(r[1],r[2],r[3],"decl"),u(e,n,"",t,i),n._atrule()})(t):r[3]&&/^(?:media|supports|page|keyframes)$/.test(r[2])?(i&&"keyframes"==r[2]&&(r[3]=r[3].replace(/(var\([^)]+\))|:?global\(\s*([_A-Za-z][-\w]*)\s*\)|()(-?[_A-Za-z][-\w]*)/,e.localizeReplacer)),"page"==r[2]?(n.atrule(r[1],r[2],r[3],"decl"),u(e,n,"",t,i)):(n.atrule(r[1],r[2],r[3],"rule"),s(e,n,"keyframes"==r[2]?"":a,t,i,c+1)),n._atrule()):n.err("Unsupported at-rule: "+r[0])}function s(e,n,l,a,i,o){var f,p,h,g;switch(d.call(a)){case z:for(f in a)if(b.call(a,f))if(p=a[f],l.length>0&&/^[-\w$]+$/.test(f))if(h||(h=1,n.rule(l)),/\$/.test(f))for(g in f=f.split("$"))b.call(f,g)&&u(e,n,f[g],p,i);else u(e,n,f,p,i);else/^@/.test(f)?(h=0,c(e,n,/^(.(?:-[\w]+-)?([_A-Za-z][-\w]*))\b\s*(.*?)\s*$/.exec(f)||[f,"@","",""],p,l,i,o)):(h=0,s(e,n,l.length>0&&(/,/.test(l)||/,/.test(f))?(g=r(l),r(i?f.replace(/("(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\/)|:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,e.localizeReplacer):f).map(function(e){return/&/.test(e)?t(e,g):g.map(function(n){return n+e}).join(",")}).join(",")):/&/.test(f)?t(i?f.replace(/("(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\/)|:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,e.localizeReplacer):f,[l]):l+(i?f.replace(/("(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\/)|:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,e.localizeReplacer):f),p,i,o+1));break;case _:for(f=0;f<a.length;f++)s(e,n,l,a[f],i,o);break;case m:l.length&&n.rule(l),n.raw(a)}}function o(e,n){var r;return n?e:{init:function(){r=0,e.init()},done:function(n){return r&&(e._rule(),r=0),e.done(n)},atrule:function(n,t,l,a){r&&(e._rule(),r=0),e.atrule(n,t,l,a)},_atrule:function(n){r&&(e._rule(),r=0),e._atrule(n)},rule:function(n){n!==r&&(r&&e._rule(),e.rule(n),r=n)}}}function f(e,n,r,t){t.init();try{e(r,t,"",n,1,0)}catch(e){t.err(e instanceof Error?e.stack:""+e)}return t.done()}function p(e,n,r){var t={},l=e?function(n){return t[n]||(t[n]=e+n+r),t[n].match(/^\S+/)}:function(e){return t[e]||(t[e]=e+r),t[e].match(/^\S+/)};return{atruleHandlers:n,names:t,localize:l,localizeReplacer:function(e,n,r,t,a){return n||r||t+l(a)}}}function h(n){n=n||{};var r,t,i,c=[{init:function(){r=[],t=[]},done:function(e){if(0!=t.length)throw new Error("j2c error(s): "+JSON.stringify(t,null,2)+"in context:\n"+r.join(""));return e?r:r.join("")},err:function(e){t.push(e),r.push("/* +++ ERROR +++ "+e+" */\n")},raw:function(e){r.push(e,"\n")},atrule:function(e,n,t,l){r.push(e,t&&" ",t,l?" {\n":";\n")},_atrule:function(){r.push("}\n")},rule:function(e){r.push(e," {\n")},_rule:function(){r.push("}\n")},decl:function(e,n){r.push(e,":",n,";\n")}}],h=[o],g=[],A=[],Z=a(7),k={};d.call(n.plugins)===_&&l(function(e){d.call(e)===z&&(d.call(e.filter)===v&&h.push(e.filter),d.call(e.atrule)===v&&g.push(e.atrule),d.call(e.sink)===v&&(c=e.sink()),d.call(e.set)===v&&A.push(e.set))})(n.plugins),d.call(n.suffix)===m&&(Z=n.suffix),d.call(n.suffix)===w&&(Z=a(n.suffix)),c[1]=c[1]||{init:c[0].init,done:c[0].done,raw:c[0].raw,err:c[0].err,decl:c[0].decl},i=p(0,g,Z);for(var x={names:i.names,ns:function(n){var r="__"+n.replace(/\W+/g,"_")+"_";if(!b.call(k,n)){var t=p(r,g,Z);k[n]=e({prefix:r,names:t.names,sheet:function(e){return f(s,e,t,c[0])},inline:function(e){return f(u,e,t,c[1])}},x)}return k[n]},suffix:Z,sheet:function(e){return f(s,e,i,c[0])},inline:function(e){return f(u,e,i,c[1])}},S=0;S<2;S++)for(var j=h.length;j--;)c[S]=$(e(h[j](c[S],!!S),c[S]));for(S=A.length;S--;)e(x,A[S]());return $(x),x}var g={},d=g.toString,_=d.call([]),w=d.call(0),z=d.call(g),m=d.call(""),v=d.call(d),b=g.hasOwnProperty,$=Object.freeze||function(e){return e},A=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,Z=/&|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,k="";return h});