"use strict";function cartesian(e,t,n,a,r,l){a=[];for(l in t)if(own.call(t,l))for(r in e)own.call(e,r)&&a.push(concat(e[r],t[l],n));return a}function concat(e,t,n){return n&&(/^[-\w$]+$/.test(t)&&":-error-bad-sub-selector-"+t||/&/.test(t)&&t.replace(/&/g,e))||e+t}function decamelize(e){return"-"+e.toLowerCase()}function declarations(e,t,n,a,r,l,s,c,o){if(null!=e)if(/\$/.test(n))for(o in n=n.split("$"))own.call(n,o)&&declarations(e,t,n[o],a,r,l);else switch(type.call(e=e.valueOf())){case ARRAY:for(s=0;s<e.length;s++)declarations(e[s],t,n,a,r,l);break;case OBJECT:n=n&&n+"-";for(s in e)if(own.call(e,s))if(c=e[s],/\$/.test(s))for(o in s=s.split("$"))own.call(s,o)&&declarations(c,t,n+s[o],a,r,l);else declarations(c,t,n+s,a,r,l);break;default:for(s=n.replace(/_/g,"-").replace(/[A-Z]/g,decamelize),!r||"animation-name"!=s&&"animation"!=s||(e=e.split(",").map(function(e){return e.replace(/()(?::global\(\s*([-\w]+)\s*\)|()([-\w]+))/,l.l)}).join(",")),/^animation|^transition/.test(s)&&(a=["webkit"]),s=s.replace(/^@/,"*"),o=0;o<a.length;o++)t.d("-",a[o],"-",s,s?":":"",e,";\n");t.d(s,s?":":"",e,";\n")}}function at(e,t,n,a,r,l,s,c){var o;if(/^@(?:namespace|import|charset)$/.test(e))if(type.call(t)==ARRAY)for(o=0;o<t.length;o++)n.a(e," ",t[o],";\n");else n.a(e," ",t,";\n");else if(/^@keyframes /.test(e))e=s?e.replace(/( )(?::global\(\s*([-\w]+)\s*\)|()([-\w]+))/,c.l):e,n.a("@-webkit-",e.slice(1)," {\n"),sheet(t,n,"","",["webkit"]),n.c("}\n"),n.a(e," {\n"),sheet(t,n,"","",l,s,c),n.c("}\n");else if(/^@extends?$/.test(e)){for(;o=findClass.exec(r);)e=o[4];if(null==e||!s)return void n.a("@-error-cannot-extend-in-global-context ",JSON.stringify(r),";\n");if(/^@extends?$/.test(e))return void n.a("@-error-no-class-to-extend-in ",JSON.stringify(r),";\n");c.e(type.call(t)==ARRAY?t.map(function(e){return e.replace(/()(?::global\(\s*(\.[-\w]+)\s*\)|()\.([-\w]+))/,c.l)}).join(" "):t.replace(/()(?::global\(\s*(\.[-\w]+)\s*\)|()\.([-\w]+))/,c.l),e)}else if(/^@(?:font-face$|viewport$|page )/.test(e))if(type.call(t)===ARRAY)for(o=0;o<t.length;o++)n.a(e," {\n"),declarations(t[o],n,"",l,s,c),n.c("}\n");else n.a(e," {\n"),declarations(t,n,"",l,s,c),n.c("}\n");else/^@global$/.test(e)?sheet(t,n,a,r,l,0,c):/^@local$/.test(e)?sheet(t,n,a,r,l,1,c):/^@(?:media |supports |document )./.test(e)?(n.a(e," {\n"),sheet(t,n,a,r,l,s,c),n.c("}\n")):n.a("@-error-unsupported-at-rule ",JSON.stringify(e),";\n")}function splitSelector(e){for(var t,n,a=[],r=[],l=0;t=selectorTokenizer.exec(e);)switch(t[0]){case"(":l++;break;case")":l--;break;case",":if(l)break;a.push(t.index)}for(n=a.length;n--;)r.unshift(e.slice(a[n]+1)),e=e.slice(0,a[n]);return r.unshift(e),r}function sheet(e,t,n,a,r,l,s){var c,o,i,f;switch(type.call(e)){case ARRAY:for(c=0;c<e.length;c++)sheet(e[c],t,n,a,r,l,s);break;case OBJECT:for(c in e)i=e[c],n&&/^[-\w$]+$/.test(c)?(f||(f=1,t.s(n||"*"," {\n")),declarations(i,t,c,r,l,s)):/^@/.test(c)?(f=f&&t.c("}\n")&&0,at(c,i,t,n,a,r,l,s)):(f=f&&t.c("}\n")&&0,sheet(i,t,(o=/,/.test(n)||n&&/,/.test(c))?cartesian(splitSelector(n),splitSelector(l?c.replace(/()(?::global\(\s*(\.[-\w]+)\s*\)|(\.)([-\w]+))/g,s.l):c),n).join(","):concat(n,l?c.replace(/()(?::global\(\s*(\.[-\w]+)\s*\)|(\.)([-\w]+))/g,s.l):c,n),o?cartesian(splitSelector(a),splitSelector(c),a).join(","):concat(a,c,a),r,l,s));f&&t.c("}\n");break;case STRING:t.s(n||":-error-no-selector"," {\n"),declarations(e,t,"",r,l,s),t.c("}\n")}}function flatIter(e){return function t(n){if(type.call(n)===ARRAY)for(var a=0;a<n.length;a++)t(n[a]);else e(n)}}function j2c(){function e(e){function t(){emptyArray.push.apply(a.b,arguments)}var a;a={b:[],a:t,s:t,d:t,c:t};for(var r=0;r<n.length;r++)a=n[r](a,e);return a}function t(e,t,n){for(n=0;n<a.length;n++)e=a[n](e)||e;return e.join("")}var n=[],a=[],r={},l={flatIter:flatIter,names:r,scopeRoot:"__j2c-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36),use:function(){return i(emptyArray.slice.call(arguments)),l}},s=flatIter(function(e){for(var t in e)t in r||(r[t]=e[t])}),c=flatIter(function(e){n.push(e)}),o=flatIter(function(e){a.push(e)}),i=flatIter(function(e){if(type.call(e)===FUNCTION&&(e=e(l)),e)for(var t in e)if(own.call(e,t))switch(t){case"names":s(e[t]);break;case"postprocess":o(e[t]);break;case"filter":c(e[t]);break;default:t in l||(l[t]=e[t])}});i(emptyArray.slice.call(arguments));var f={e:function(e,t){var n=r[t];r[t]=n.slice(0,n.lastIndexOf(" ")+1)+e+" "+n.slice(n.lastIndexOf(" ")+1)},l:function(e,t,n,a,s){return n?t+n:(r[s]||(r[s]=s+l.scopeRoot),t+a+r[s].match(/\S+$/))}};return l.sheet=function(n,a){return sheet(n,a=e(),"","",emptyArray,1,f),a=t(a.b)},l.inline=function(n,a){return declarations(n,a=e(),"",emptyArray,1,f),t(a.b)},l}var emptyObject={},emptyArray=[],type=emptyObject.toString,own=emptyObject.hasOwnProperty,OBJECT=type.call(emptyObject),ARRAY=type.call(emptyArray),STRING=type.call(""),FUNCTION=type.call(type),findClass=/()(?::global\(\s*(\.[-\w]+)\s*\)|(\.)([-\w]+))/g,selectorTokenizer=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'/g,_j2c=j2c();"sheet|sheets|inline|remove|names|flatIter".split("|").map(function(e){j2c[e]=_j2c[e]}),module.exports=j2c;