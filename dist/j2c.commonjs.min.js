"use strict";function cartesian(e,t,a,n,r,l){n=[];for(l in t)if(own.call(t,l))for(r in e)own.call(e,r)&&n.push(concat(e[r],t[l],a));return n}function concat(e,t,a){return a&&(/^[-\w$]+$/.test(t)&&":-error-bad-sub-selector-"+t||/&/.test(t)&&t.replace(/&/g,e))||e+t}function splitSelector(e){for(var t,a,n=[],r=[],l=0;t=selectorTokenizer.exec(e);)switch(t[0]){case"(":l++;break;case")":l--;break;case",":if(l)break;n.push(t.index)}for(a=n.length;a--;)r.unshift(e.slice(n[a]+1)),e=e.slice(0,n[a]);return r.unshift(e),r}function decamelize(e){return"-"+e.toLowerCase()}function declarations(e,t,a,n,r,l,s,c){if(null!=e)if(/\$/.test(a))for(c in a=a.split("$"))own.call(a,c)&&declarations(e,t,a[c],n,r);else switch(type.call(e=e.valueOf())){case ARRAY:for(l=0;l<e.length;l++)declarations(e[l],t,a,n,r);break;case OBJECT:a=a&&a+"-";for(l in e)if(own.call(e,l))if(s=e[l],/\$/.test(l))for(c in l=l.split("$"))own.call(l,c)&&declarations(s,t,a+l[c],n,r);else declarations(s,t,a+l,n,r);break;default:l=a.replace(/_/g,"-").replace(/[A-Z]/g,decamelize),!n||"animation-name"!=l&&"animation"!=l||(e=e.split(",").map(function(e){return e.replace(/()(?::?global\(\s*([-\w]+)\s*\)|()([-\w]+))/,r.l)}).join(",")),l=l.replace(/^@/,"*"),t.d(l,l?":":"",e,";\n")}}function at(e,t,a,n,r,l,s){var c,o,i;if(/^@global$/.test(e))sheet(t,a,n,1,0,s);else if(/^@local$/.test(e))sheet(t,a,n,1,1,s);else if(/^@composes$/.test(e)){if(!l)return void a.a("@-error-at-composes-in-at-global","","",";\n");if(!r)return void a.a("@-error-at-composes-no-nesting","","",";\n");for(r=splitSelector(r),c=0;c<r.length;c++)e=/^\s*\.(\w+)\s*$/.exec(r[c]),null!=e?s.c(type.call(t)==ARRAY?t.map(function(e){return e.replace(/()(?::?global\(\s*\.?([-\w]+)\s*\)|()\.([-\w]+))/,s.l)}).join(" "):t.replace(/()(?::?global\(\s*\.?([-\w]+)\s*\)|()\.([-\w]+))/,s.l),e[1]):a.a("@-error-at-composes-bad-target"," ",JSON.stringify(r[c]),";\n")}else if(/^@(?:-[\w]+-)?(?:namespace|import|charset)$/.test(e))if(type.call(t)==ARRAY)for(o=0;o<t.length;o++)a.a(e," ",t[o],";\n");else a.a(e," ",t,";\n");else if(/^@(?:-[\w]+-)?keyframes /.test(e))e=l?e.replace(/( )(?::?global\(\s*([-\w]+)\s*\)|()([-\w]+))/,s.l):e,i=e.slice(e.indexOf(" ")+1),e=e.slice(0,e.indexOf(" ")),a.a(e," ",i," {\n"),sheet(t,a,"",1,l,s),a.c("}\n");else if(/^@(?:-[\w]+-)?(?:font-face$|viewport$|page\b\s*(.+))/.test(e))if(i=e.match(/^@(?:-[\w]+-)?(?:font-face$|viewport$|page\b\s*(.+))/)[1]||"",e=e.match(/^@(?:-[\w]+-)?(?:font-face$|viewport$|page)/)[0],type.call(t)===ARRAY)for(o=0;o<t.length;o++)a.a(e,i&&" ",i," {\n"),declarations(t[o],a,"",l,s),a.c("}\n");else a.a(e,i&&" ",i," {\n"),declarations(t,a,"",l,s),a.c("}\n");else/^@(?:-[\w]+-)?(?:media|supports|document)\b\s*(.+)/.test(e)?(i=e.match(/^@(?:-[\w]+-)?(?:media|supports|document)\b\s*(.+)/)[1],e=e.match(/^@(?:-[\w]+-)?(?:media|supports|document)/)[0],a.a(e," ",i," {\n"),sheet(t,a,n,1,l,s),a.c("}\n")):a.a("@-error-unsupported-at-rule ",JSON.stringify(e),";\n")}function sheet(e,t,a,n,r,l){var s,c,o;switch(type.call(e)){case ARRAY:for(s=0;s<e.length;s++)sheet(e[s],t,a,n,r,l);break;case OBJECT:for(s in e)c=e[s],a&&/^[-\w$]+$/.test(s)?(o||(o=1,t.s(a||"*"," {\n")),declarations(c,t,s,r,l)):/^@/.test(s)?(o=o&&t.c("}\n")&&0,at(s,c,t,a,n,r,l)):(o=o&&t.c("}\n")&&0,sheet(c,t,/,/.test(a)||a&&/,/.test(s)?cartesian(splitSelector(a),splitSelector(r?s.replace(/()(?::global\(\s*(\.[-\w]+)\s*\)|(\.)([-\w]+))/g,l.l):s),a).join(","):concat(a,r?s.replace(/()(?::global\(\s*(\.[-\w]+)\s*\)|(\.)([-\w]+))/g,l.l):s,a),n||a?"":s,r,l));o&&t.c("}\n");break;case STRING:t.s(a||":-error-no-selector"," {\n"),declarations(e,t,"",r,l),t.c("}\n")}}function flatIter(e){return function t(a){if(type.call(a)===ARRAY)for(var n=0;n<a.length;n++)t(a[n]);else e(a)}}function j2c(){function e(e){function t(){emptyArray.push.apply(n.b,arguments)}var n;n={b:[],a:t,s:t,d:t,c:t};for(var r=0;r<a.length;r++)n=a[r](n,e);return n}function t(e,t,a){for(a=0;a<n.length;a++)e=n[a](e)||e;return e.join("")}var a=[],n=[],r={},l={flatIter:flatIter,names:r,scopeRoot:"__j2c-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36),use:function(){return i(emptyArray.slice.call(arguments)),l}},s=flatIter(function(e){for(var t in e)t in r||(r[t]=e[t])}),c=flatIter(function(e){a.push(e)}),o=flatIter(function(e){n.push(e)}),i=flatIter(function(e){if(type.call(e)===FUNCTION&&(e=e(l)),e)for(var t in e)if(own.call(e,t))switch(t){case"names":s(e[t]);break;case"postprocess":o(e[t]);break;case"filter":c(e[t]);break;default:t in l||(l[t]=e[t])}}),f={c:function(e,t){var a=r[t];r[t]=a.slice(0,a.lastIndexOf(" ")+1)+e+" "+a.slice(a.lastIndexOf(" ")+1)},l:function(e,t,a,n,s){return a?t+a:(r[s]||(r[s]=s+l.scopeRoot),t+n+r[s].match(/\S+$/))}};return l.sheet=function(a,n){return sheet(a,n=e(!1),"","",1,f),n=t(n.b)},l.inline=function(a,n){return declarations(a,n=e(!0),"",1,f),t(n.b)},i(emptyArray.slice.call(arguments)),l}var emptyObject={},emptyArray=[],type=emptyObject.toString,own=emptyObject.hasOwnProperty,OBJECT=type.call(emptyObject),ARRAY=type.call(emptyArray),STRING=type.call(""),FUNCTION=type.call(type),selectorTokenizer=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,_j2c=j2c();"sheet|sheets|inline|remove|names|flatIter".split("|").map(function(e){j2c[e]=_j2c[e]}),module.exports=j2c;