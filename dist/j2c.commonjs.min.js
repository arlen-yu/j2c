"use strict";function cartesian(e,t){var n,a,r=[];for(a in t)if(own.call(t,a))for(n in e)own.call(e,n)&&r.push(e[n]+t[a]);return r}function splitSelector(e){for(var t,n=[],a=[],r=0;t=selectorTokenizer.exec(e);)switch(t[0]){case"(":r++;break;case")":r--;break;case",":if(r)break;n.push(t.index)}for(t=n.length;t--;)a.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return a.unshift(e),a}function ampersand(e,t){for(var n,a,r=[],l=[];a=ampersandTokenizer.exec(e);)"&"==a[0]&&r.push(a.index);for(a=r.length;a--;)l.unshift(e.slice(r[a]+1)),e=e.slice(0,r[a]);for(l.unshift(e),n=[l[0]],a=1;a<l.length;a++)n=cartesian(n,cartesian(t,[l[a]]));return n.join(",")}function flatIter(e){return function t(n){if(type.call(n)===ARRAY)for(var a=0;a<n.length;a++)t(n[a]);else e(n)}}function decamelize(e){return"-"+e.toLowerCase()}function declarations(e,t,n,a,r){var l,s,i;if(null!=e)switch(type.call(e=e.valueOf())){case ARRAY:for(l=0;l<e.length;l++)declarations(e[l],t,n,a,r);break;case OBJECT:n=n&&n+"-";for(l in e)if(own.call(e,l))if(s=e[l],/\$/.test(l))for(i in l=l.split("$"))own.call(l,i)&&declarations(s,t,n+l[i],a,r);else declarations(s,t,n+l,a,r);break;default:l=n.replace(/_/g,"-").replace(/[A-Z]/g,decamelize),!a||"animation-name"!=l&&"animation"!=l&&"list-style"!=l||(e=e.split(",").map(function(e){return e.replace(/:?global\(\s*([_A-Za-z][-\w]*)\s*\)|()(-?[_A-Za-z][-\w]*)/,r.l)}).join(",")),t.d(l,l?":":"",e,";\n")}}function atRules(e,t,n,a,r,l,s){if(e=/^(.(?:-[\w]+-)?([_A-Za-z][-\w]*))\b\s*(.*?)\s*$/.exec(e)||["@","@","",""],!e[3]&&/^global$/.test(e[2]))sheet(t,n,a,r,0,s);else if(!e[3]&&/^local$/.test(e[2]))sheet(t,n,a,r,1,s);else if(!e[3]&&/^(?:namespace|import|charset)$/.test(e[2]))flatIter(function(t){n.a(e[0]," ",t,";\n")})(t);else if(!e[3]&&/^(?:font-face|viewport)$/.test(e[2]))flatIter(function(t){n.a(e[1],"",""," {\n"),declarations(t,n,"",l,s),n.c("}\n")})(t);else if(e[3]&&/^(?:media|supports|page|keyframes)$/.test(e[2]))l&&"keyframes"==e[2]&&(e[3]=e[3].replace(/:?global\(\s*([_A-Za-z][-\w]*)\s*\)|()(-?[_A-Za-z][-\w]*)/,s.l)),n.a(e[1]," ",e[3]," {\n"),"page"==e[2]?declarations(t,n,"",l,s):sheet(t,n,a,0,l,s),n.c("}\n");else{for(var i=0;i<s.A.length;i++)if(s.A[i](e,t,n,a,r,l,s))return;n.a("@-error-unsupported-at-rule"," ",JSON.stringify(e[0]),";\n")}}function sheet(e,t,n,a,r,l){var s,i,o,c;switch(type.call(e)){case ARRAY:for(s=0;s<e.length;s++)sheet(e[s],t,n,a,r,l);break;case OBJECT:for(s in e)if(own.call(e,s))if(i=e[s],n&&/^[-\w$]+$/.test(s))if(o||(o=1,t.s(n," {\n")),/\$/.test(s))for(c in s=s.split("$"))own.call(s,c)&&declarations(i,t,s[c],r,l);else declarations(i,t,s,r,l);else/^@/.test(s)?(o=o&&t.c("}\n")&&0,atRules(s,i,t,n,a,r,l)):(o=o&&t.c("}\n")&&0,sheet(i,t,/,/.test(n)||n&&/,/.test(s)?(c=splitSelector(n),splitSelector(r?s.replace(/:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,l.l):s).map(function(e){return/&/.test(e)?ampersand(e,c):c.map(function(t){return t+e}).join(",")}).join(",")):/&/.test(s)?ampersand(r?s.replace(/:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,l.l):s,[n]):n+(r?s.replace(/:global\(\s*(\.-?[_A-Za-z][-\w]*)\s*\)|(\.)(-?[_A-Za-z][-\w]*)/g,l.l):s),a,r,l));o&&t.c("}\n");break;case STRING:t.s(n||":-error-no-selector"," {\n"),declarations(e,t,"",r,l),t.c("}\n")}}function global(e){return":global("+e+")"}function kv(e,t,n){return n={},n[e]=t,n}function at(e,t,n){if(arguments.length<3){var a=at.bind.apply(at,[null].concat([].slice.call(arguments,0)));return a.toString=function(){return"@"+e+" "+t},a}return kv("@"+e+" "+t,n)}function j2c(){function e(t,n){for(var a in n)own.call(n,a)&&a.indexOf("$")&&(OBJECT==type.call(n[a])&&OBJECT==type.call(t[a])?e(t[a],n[a]):a in t||(t[a]=n[a]))}function t(e,t){function n(){emptyArray.push.apply(r,arguments)}for(var r=[],l={x:function(e){return e?r:r.join("")},a:n,s:n,d:n,c:n},s=a.length;s--;)l=a[s](l,e,t);return l}function n(e,t,n,a){return t?t:(l.names[a]||(l.names[a]=a+l.suffix),n+l.names[a].match(/^\S+/))}var a=[],r=[],l={at:at,global:global,kv:kv,names:{},suffix:"__j2c-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36),use:function(){return s(emptyArray.slice.call(arguments)),l},$plugins:[]},s=flatIter(function(t){~l.$plugins.indexOf(t)||(l.$plugins.push(t),type.call(t)===FUNCTION&&(t=t(l)),t&&(flatIter(function(e){a.push(e)})(t.$filter||[]),flatIter(function(e){r.push(e)})(t.$at||[]),e(l,t)))});return n.a=r,l.sheet=function(e,a){var s={s:sheet,a:atRules,d:declarations,A:r,l:n,n:l.names};return sheet(e,a=t(!1,s),"","",1,s),a.x()},l.inline=function(e,a){var s={s:sheet,a:atRules,d:declarations,A:r,l:n,n:l.names};return declarations(e,a=t(!0,s),"",1,s),a.x()},l}var emptyArray=[],emptyObject={},type=emptyObject.toString,ARRAY=type.call(emptyArray),OBJECT=type.call(emptyObject),STRING=type.call(""),FUNCTION=type.call(type),own=emptyObject.hasOwnProperty,selectorTokenizer=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,ampersandTokenizer=/&|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,_j2c=j2c();"sheet|inline|names|at|global|kv|suffix".split("|").map(function(e){j2c[e]=_j2c[e]}),module.exports=j2c;