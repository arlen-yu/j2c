"use strict";function cartesian(e,t,n,a,r,s){a=[];for(s in t)if(own.call(t,s))for(r in e)own.call(e,r)&&a.push(concat(e[r],t[s],n));return a}function concat(e,t,n){return n&&(/^[-\w$]+$/.test(t)&&":-error-bad-sub-selector-"+t||/&/.test(t)&&t.replace(/&/g,e))||e+t}function splitSelector(e){for(var t,n,a=[],r=[],s=0;t=selectorTokenizer.exec(e);)switch(t[0]){case"(":s++;break;case")":s--;break;case",":if(s)break;a.push(t.index)}for(n=a.length;n--;)r.unshift(e.slice(a[n]+1)),e=e.slice(0,a[n]);return r.unshift(e),r}function flatIter(e){return function t(n){if(type.call(n)===ARRAY)for(var a=0;a<n.length;a++)t(n[a]);else e(n)}}function decamelize(e){return"-"+e.toLowerCase()}function declarations(e,t,n,a,r){var s,l,o;if(null!=e)if(/\$/.test(n))for(o in n=n.split("$"))own.call(n,o)&&declarations(e,t,n[o],a,r);else switch(type.call(e=e.valueOf())){case ARRAY:for(s=0;s<e.length;s++)declarations(e[s],t,n,a,r);break;case OBJECT:n=n&&n+"-";for(s in e)if(own.call(e,s))if(l=e[s],/\$/.test(s))for(o in s=s.split("$"))own.call(s,o)&&declarations(l,t,n+s[o],a,r);else declarations(l,t,n+s,a,r);break;default:s=n.replace(/_/g,"-").replace(/[A-Z]/g,decamelize),!a||"animation-name"!=s&&"animation"!=s&&"list-style"!=s||(e=e.split(",").map(function(e){return e.replace(/:?global\(\s*([-\w]+)\s*\)|()([-\w]+)/,r.l)}).join(",")),s=s.replace(/^@/,"*"),t.d(s,s?":":"",e,";\n")}}function at(e,t,n,a,r,s,l){var o,c;if(/^@global$/.test(e))sheet(t,n,a,1,0,l);else if(/^@local$/.test(e))sheet(t,n,a,1,1,l);else if(/^@composes$/.test(e)){if(!s)return void n.a("@-error-at-composes-in-at-global","","",";\n");if(!r)return void n.a("@-error-at-composes-no-nesting","","",";\n");for(r=splitSelector(r),o=0;o<r.length;o++)e=/^\s*\.(\w+)\s*$/.exec(r[o]),null!=e?l.c(type.call(t)==ARRAY?t.map(function(e){return e.replace(/:?global\(\s*\.?([-\w]+)\s*\)|()\.([-\w]+)/,l.l)}).join(" "):t.replace(/:?global\(\s*\.?([-\w]+)\s*\)|()\.([-\w]+)/,l.l),e[1]):n.a("@-error-at-composes-bad-target"," ",JSON.stringify(r[o]),";\n")}else/^@(?:-[\w]+-)?(?:namespace|import|charset)$/.test(e)?flatIter(function(t){n.a(e," ",t,";\n")})(t):/^@(?:-[\w]+-)?(?:font-face|viewport|swash|ornaments|annotation|stylistic|styleset|character-variant)$/.test(e)?flatIter(function(t){n.a(e,"",""," {\n"),declarations(t,n,"",s,l),n.c("}\n")})(t):/^@(?:-[\w]+-)?(?:media|supports|document|page|keyframes|counter-style|font-feature-values)\b\s*(.+)/.test(e)?(c=e.match(/^@(?:-[\w]+-)?(?:media|supports|document|page|keyframes|counter-style|font-feature-values)\b\s*(.+)/)[1],e=e.match(/^@(?:-[\w]+-)?(?:media|supports|document|page|keyframes|counter-style|font-feature-values)/)[0],s&&/^@(?:-[\w]+-)?(?:keyframes|counter-style)/.test(e)&&(c=c.replace(/:?global\(\s*([-\w]+)\s*\)|()([-\w]+)/,l.l)),n.a(e," ",c," {\n"),/@(?:-[\w]+-)?(?:page|counter-style)/.test(e)?declarations(t,n,"",s,l):sheet(t,n,a,1,s,l),n.c("}\n")):n.a("@-error-unsupported-at-rule"," ",JSON.stringify(e),";\n")}function sheet(e,t,n,a,r,s){var l,o,c;switch(type.call(e)){case ARRAY:for(l=0;l<e.length;l++)sheet(e[l],t,n,a,r,s);break;case OBJECT:for(l in e)o=e[l],n&&/^[-\w$]+$/.test(l)?(c||(c=1,t.s(n||"*"," {\n")),declarations(o,t,l,r,s)):/^@/.test(l)?(c=c&&t.c("}\n")&&0,at(l,o,t,n,a,r,s)):(c=c&&t.c("}\n")&&0,sheet(o,t,/,/.test(n)||n&&/,/.test(l)?cartesian(splitSelector(n),splitSelector(r?l.replace(/:global\(\s*(\.[-\w]+)\s*\)|(\.)([-\w]+)/g,s.l):l),n).join(","):concat(n,r?l.replace(/:global\(\s*(\.[-\w]+)\s*\)|(\.)([-\w]+)/g,s.l):l,n),a||n?"":l,r,s));c&&t.c("}\n");break;case STRING:t.s(n||":-error-no-selector"," {\n"),declarations(e,t,"",r,s),t.c("}\n")}}function j2c(){function e(e){function t(){emptyArray.push.apply(a.b,arguments)}var a;a={b:[],a:t,s:t,d:t,c:t};for(var r=0;r<n.length;r++)a=n[r](a,e);return a}function t(e,t,n){for(n=0;n<a.length;n++)e=a[n](e)||e;return e.join("")}var n=[],a=[],r={flatIter:flatIter,names:{},suffix:"__j2c-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36)+"-"+Math.floor(4294967296*Math.random()).toString(36),use:function(){return l(emptyArray.slice.call(arguments)),r}},s={$names:flatIter(function(e){for(var t in e)t in r.names||(r.names[t]=e[t])}),$filter:flatIter(function(e){n.push(e)}),$postprocess:flatIter(function(e){a.push(e)})},l=flatIter(function(e){if(type.call(e)===FUNCTION&&(e=e(r)),e)for(var t in e)own.call(e,t)&&(/^\$/.test(t)?t in s&&s[t](e[t]):t in r||(r[t]=e[t]))}),o={c:function(e,t){var n=r.names[t];r.names[t]=n.slice(0,n.lastIndexOf(" ")+1)+e+" "+n.slice(n.lastIndexOf(" ")+1)},l:function(e,t,n,a){return t?t:(r.names[a]||(r.names[a]=a+r.suffix),n+r.names[a].match(/\S+$/))}};return r.sheet=function(n,a){return sheet(n,a=e(!1),"","",1,o),a=t(a.b)},r.inline=function(n,a){return declarations(n,a=e(!0),"",1,o),t(a.b)},r}var emptyArray=[],emptyObject={},emptyString="",type=emptyObject.toString,ARRAY=type.call(emptyArray),OBJECT=type.call(emptyObject),STRING=type.call(emptyString),FUNCTION=type.call(type),own=emptyObject.hasOwnProperty,selectorTokenizer=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,_j2c=j2c();"sheet|sheets|inline|remove|names|flatIter".split("|").map(function(e){j2c[e]=_j2c[e]}),module.exports=j2c;