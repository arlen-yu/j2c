<!doctype html>
<title>J2C â€” JavaScript to CSS Compiler</title>

<!--[if lte IE 8]>
<script src="https://cdn.polyfill.io/v1/polyfill.min.js"></script>
<![endif]-->

<script src="https://cdn.rawgit.com/pygy/j2c/f84075582e21af6b3c89a58afb02f37b892c42df/dist/j2c.global.js"></script>
<script src="mithril.js"></script>

<script>

var border_box = {
    ",:before,:after":{ //note the initial coma
        box_sizing:"border-box"
    }
}

var pocketgrid = {
    group: [
        /* Clearfix */
        "*zoom: 1",
        border_box,
        {
            ":before,:after": {
                display: "table",
                content: '""',
                line_heigth: 0
            },
            ":after": {clear:"both"},

            /* ul/li compatibility */
            "list-style-type":"none",
            margin$padding:0

        }
    ],
    block: [
        border_box,
        {
            float: "left",
            width: "100%"
        }
    ]
}

pocketgrid.nested = [
    pocketgrid.group,
    {
        clear: "none",
        float: "left",
        margin: "0 !important"
    }
]
</script>

<script>
var isFF = (typeof InstallTrigger !== 'undefined'),
    isIElt10 = (document.all && !window.atob);

//fake text outline using shadows.
function outline(w, bl, co){
    w = w / 1000;
    bl = bl / 1000;

    
    var top = isFF ? w / 17 * 20 : w, // In FF, the pseudo-outline is slightly thinner on top.
        dg = (""+w / 1.414213).slice(0,7); // diagonal, divide by sqrt(2)

    // This one is ugly :-/
    return [

        ""  + w + "em 0 " + bl + "em " + co, "0 "  + w   + "em " + bl + "em " + co,
        "-" + w + "em 0 " + bl + "em " + co, "0 -" + top + "em " + bl + "em " + co,

        ""  + dg + "em "  + dg + "em " + bl + "em " + co,
        "-" + dg + "em "  + dg + "em " + bl + "em " + co,
        ""  + dg + "em -" + dg + "em " + bl + "em " + co,
        "-" + dg + "em -" + dg + "em " + bl + "em " + co

    ].join() + ";"
}
// 
var logo = {
    // Since we use shadows to fake the outline, use a fallback color for 
    // CSS2 browsers.
    // IE9 supports CSS3 colors, but not text shadows, hence the last item.
    color: ["#9cf", "rgba(255,255,255,1)", isIElt10 && "#9cf"],
    two_color: ["#24f", "rgba(255,255,255,1)", isIElt10 && "#24f"],
    subtitle_color: "#357",
    bg_color: "#ff8"
}

var logostyle = j2c.sheet({
    "@font-face":[
    {
        font: {
            family: "'Dosis'",
            style: "normal",
            weight: 500
        },
        src: "local('Dosis Medium'), local('Dosis-Medium'), url(data:;base64,AAEAAAAOAIAAAwBgR0RFRgARAAIAAARkAAAAFkdQT1PYSudjAAAEfAAAAGxHU1VCABUACgAABOgAAAAMT1MvMoqCeA4AAAI0AAAAYGNtYXAAYwCZAAAClAAAADxnYXNwAAMABwAABFgAAAAMZ2x5Zn9PVS0AAADsAAAAuGhlYWT428GxAAABzAAAADZoaGVhB5cCyQAAAhAAAAAkaG10eAV7AIQAAAIEAAAADGxvY2EAMwBcAAABxAAAAAhtYXhwAiwESAAAAaQAAAAgbmFtZRrTNq0AAALQAAABaHBvc3T/3QAaAAAEOAAAACAAAQBA//oB7wLbACIAADcRNDYzMhYVFAYjIicmIyIVERQzMj4CNzYzMhYVFAYjIiZAd2BidhQWKAIGfIWIJzQZCAMDJxYUd2Jfd9QBLXBqY0sbEx1zjv7TjhYqHhkdFBtMZWoAAAAAAQAU//oBwwLbABsAADc0NjMyFRQWMzI1ESMiJjU0MzMyFhURFAYjIiYUFRUqRT6Egg4PHbAPF3VgYnixFxIdNUKOAbsWESUQDv4XcWllAAAAAAEAAAADAGwABwAAAAAAAgABAAIAIAAAAgAD2AAAAAAAAAAAADMAXAABAAAAAQGJXP+4El8PPPUAHwPoAAAAAMqKZMYAAAAAy40Xb/95/xMEGAP7AAAACAACAAAAAAAAAWEAMAITAEACBwAUAAEAAAQD/xMAAAQ5/3n/eQQYAAEAAAAAAAAAAAAAAAAAAAADAAMByQH0AAUAAAK8AooAAACMArwCigAAAd0AMgD6CAACAQYDAgICBgADoAAAv1AAIHsAAAAAAAAAAFBZUlMAQAAA+wIEA/8TAAAEAwDtIAAAkwAAAAAB2gLbAAAAIAACAAAAAgAAAAMAAAAUAAMAAQAAABQABAAoAAAABgAEAAEAAgBDAEr//wAAAEMASv///77/uAABAAAAAAAAAAAABwBaAAMAAQQJAAEACgAAAAMAAQQJAAIADAAKAAMAAQQJAAMAegAWAAMAAQQJAAQAGACQAAMAAQQJAAUAGgCoAAMAAQQJAAYAGADCAAMAAQQJAA4ANADaAEQAbwBzAGkAcwBNAGUAZABpAHUAbQBFAGQAZwBhAHIAVABvAGwAZQBuAHQAaQBuAG8ALABQAGEAYgBsAG8ASQBtAHAAYQBsAGwAYQByAGkALABJAGcAaQBuAG8ATQBhAHIAaQBuAGkAOgAgAEQAbwBzAGkAcwAgAE0AZQBkAGkAdQBtADoAIAAyADAAMQAxAEQAbwBzAGkAcwAgAE0AZQBkAGkAdQBtAFYAZQByAHMAaQBvAG4AIAAxAC4AMAAwADcARABvAHMAaQBzAC0ATQBlAGQAaQB1AG0AaAB0AHQAcAA6AC8ALwBzAGMAcgBpAHAAdABzAC4AcwBpAGwALgBvAHIAZwAvAE8ARgBMAAMAAAAAAAD/2gAaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAAv//AAMAAQAAAAwAAAAAAAAAAQABAAIAAQABAAAAAQAAAAoAHgAsAAFsYXRuAAgABAAAAAD//wABAAAAAWtlcm4ACAAAAAEAAAABAAQAAgAAAAEACAACACIABAAAACoAKgADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQACAAEAAgABAAEAAgABAAIAAQAAAAoACgAKAAA=) format('truetype')"
    },{
        font: {
            family: "'Dosis'",
            style: "normal",
            weight: 700
        },
        src: "local('Dosis Bold'), local('Dosis-Bold'), url(data:font/truetype;base64,AAEAAAAOAIAAAwBgR0RFRgAPAAIAAAQEAAAAFEdQT1MAFQAKAAAEGAAAAAxHU1VCABUACgAABCQAAAAMT1MvMotKegUAAAHsAAAAYGNtYXAADACFAAACTAAAADRnYXNwAAMABwAAA/gAAAAMZ2x5ZrZShLMAAADsAAAAdGhlYWT5EsGpAAABiAAAADZoaGVhB80C9AAAAcgAAAAkaG10eAN/AEAAAAHAAAAACGxvY2EAOgAAAAABgAAAAAZtYXhwAisERAAAAWAAAAAgbmFtZRjfNNwAAAKAAAABWHBvc3T/3QAaAAAD2AAAACAAAQAbAAAB4QLbACkAADc1NDY3NzY2NTQmIyIGFRQGIyI1NDYzMhYVFA4DFRUhMhYUBiMhIiYbQi9gL0IvLicyJR87gFdbhUFeXUEBFhAZGRD+nBMmKWEsViNFI04nIzYsLBMdRlJmb1w8aUk+PhwYIS4jGAABAAAAAgBoAAcAAAAAAAIAAQACACAAAAIAA9gAAAAAAAAAAAA6AAAAAQAAAAEBiaWBLdpfDzz1AB8D6AAAAADKimTQAAAAAMuNF2T/fP8TBEsD9AABAAgAAgAAAAAAAAGEACUB+wAbAAEAAAQD/xMAAARk/3z/egRLAAEAAAAAAAAAAAAAAAAAAAACAAMB3wK8AAUAAAK8AooAAACMArwCigAAAd0AMgD6CAACAQgDAgICBgADoAAAv1AAIHsAAAAAAAAAAFBZUlMAIAAA+wIEA/8TAAAEAwDtIAAAkwAAAAAB2wLbAAAAIAACAAAAAgAAAAMAAAAUAAMAAQAAABQABAAgAAAABAAEAAEAAAAy//8AAAAy////zwABAAAAAAAAAAcAWgADAAEECQABAAoAAAADAAEECQACAAgACgADAAEECQADAHYAEgADAAEECQAEABQAiAADAAEECQAFABoAnAADAAEECQAGABQAtgADAAEECQAOADQAygBEAG8AcwBpAHMAQgBvAGwAZABFAGQAZwBhAHIAVABvAGwAZQBuAHQAaQBuAG8ALABQAGEAYgBsAG8ASQBtAHAAYQBsAGwAYQByAGkALABJAGcAaQBuAG8ATQBhAHIAaQBuAGkAOgAgAEQAbwBzAGkAcwAgAEIAbwBsAGQAOgAgADIAMAAxADEARABvAHMAaQBzACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAA2AEQAbwBzAGkAcwAtAEIAbwBsAGQAaAB0AHQAcAA6AC8ALwBzAGMAcgBpAHAAdABzAC4AcwBpAGwALgBvAHIAZwAvAE8ARgBMAAMAAAAAAAD/2gAaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAAv//AAMAAQAAAAwAAAAAAAAAAQABAAEAAQABAAAACgAKAAoAAAABAAAACgAKAAoAAA==) format('truetype')"
    }],
    " body":{margin$padding:0},
    ".container":{
        color:"#333",
        margin: "0 auto",
        max_width:"48em",
        padding:0,
        position:"relative"
    },
    ".ghribbon":[
        {
            background_color:logo.subtitle_color,
            left: "-6.9em",
            overflow: "hidden",
            position:"absolute",
            top: "2.2em",
            transition: "all 0.5s",
            white_space: "nowrap",
            width:"20em",
            _o$_ms$_moz$_webkit$: {
                transform: "rotate(-45deg) scaleX(0.9)",
                box_shadow: "0 0 10px rgba(0,0,0,0.6)"
            },
            ":hover": {
                box_shadow: "0 0 8px rgba(0,0,0,0.6)"
            },
            " a": {
                border:"solid 1px rgba(255,255,255,0.65)",
                color:"#eee",
                display:"block",
                font: "normal 82% sans-serif",
                margin:"2px auto",
                padding:"8px 50px",
                position:"relative",
                text: {
                    align:"center",
                    decoration: "none",
                    shadow: "0 0 5px rgba(0, 0, 0, 1)"
                },
                transition: "all 0.3s",
                width:"15em",
                ":hover,:hover::before": {
                    border:"solid 1px #fff",
                    color:"#fff",
                    text: {
                        shadow: "0 0 5px rgba(255,255,255,0.3)"
                    }
                },
                "::before": {
                    border:"dashed 1px  rgba(255,255,255,0.45)",
                    content:"' '",
                    height$width:"100%",
                    margin:{top:"-9px",left:"-6em"},
                    position:"absolute",
                }
            }
        },{
            "@media (min-width:64em)":{
                position:"fixed"
            }
        }
    ],
    " .green":{color:"green"},
    " .red":{color:"inherit"},
    // " body": pocketgrid.blockgroup,
    " header": [
        {
            background_color: logo.bg_color,
            font_size: "2em",
            overflow: "hidden",
            padding:0,

            " h2, h6": {
                color: logo.subtitle_color,
                font_family: "sans-serif",
                text_align: "center"
            },

            " h6": {
                background_color:"#fff",
                margin:0,
                padding_top:"0.5em"
            },

            " h1": {
                color: logo.color,
                font:{
                    family: "Dosis, sans-serif",
                    size: "9em",
                    weight: 500
                },
                line_height: 0.8,
                margin: "0 auto",
                postion: "relative",
                text_shadow: outline(17, 9, "#9cf"),
                width: "1.05em",

                ":before": {
                    content:'"J"'
                },

                " .two":{
                    color: logo.two_color,
                    font: {
                        size: "0.643em",
                        weight: 700
                    },
                    margin_left: "-0.273em",
                    padding_top: "0.36em",
                    position: "absolute",
                    z_index: 1
                },

                " .Cee": {
                    color: logo.color,
                    margin_left: "-0.015em",
                    position: "absolute",
                    ":before": {
                        content:'"C"'
                    }
                }
            },


            " h1, h1 .Cee": {
                ":before": {
                    background_color:  logo.bg_color,
                    display: "block",
                    height: "0.54em",
                    line_height: 1,
                    // margin_top: "-.01em",
                    overflow: "hidden",
                    position: "absolute"
                }
            }
        }
        // ,
        // pocketgrid.block
    ],
    ".description":[
        {
            font:{
                family:"sans-serif",
                size:"1.3em"
            },
            line_height:"1.5em",
            margin:{left$right:"1em"}
        }
    ]
    
})


var css = logostyle.toString()
    head = document.head || document.getElementsByTagName('head')[0],
    style = document.createElement('style');

style.type = 'text/css';
if (style.styleSheet){
  style.styleSheet.cssText = css;
} else {
  style.appendChild(document.createTextNode(css));
}

head.appendChild(style);

</script>
<header>
        <h1 class="hollow">J<span class="two">2</span><span class="Cee">C</span></h1>
        <h2>JavaScript to<br>CSS Compiler</h2>
        <h6>~830 bytes down the line</h6>
</header>
<div class="container">
<p class="description"><tt>j2c</tt> is a CSS preprocessor working from JavaScript objects. It provides a sizable subset of SASS in a tiny, single pass compiler.</p>

<p class="description">This page is very much WIP, please check the <a href="https://github.com/pygy/j2c">github repo</a> for the documentation.
</p>
<p class="description">Here's a live demo.</p>
<div id="playground"></div>
<script>
setTimeout(function(){
var j2c = window.j2c;

function longString(func) {
  var matches = func.toString().match(/function\s*\(\)\s*\{\s*\/\*\!?\s*([\s\S]+?)\s*\*\/\s*\}/);
  if (!matches) return false;
 
  return matches[1];
}


function sanitize(source) {
  return source.replace(/(\W)(while|for|eval)(\W)/g, "$1_$2_$3")
}
var pages = [
  {
    name: "Inline stlyes: intro",
    code: longString(function(){/*!
// Here we demonstrate j2c's ability to
// create inline styles.

j2c({
  // Underscores are converted to
  // dashes so that property names can
  // be left unquoted.
  background_color:"red",

  // The following sets the width and
  // color of the top and left borders.
  border: {
    top$left: {
      width: "1px",
      color: "white"
    }
  }
})

*/})
  }, {
    name: "Inline styles: arrays for order",
    code: longString(function(){/*!
// The order of iteration over the keys
// of a js object is undefined. If you
// want to ensure that properties occur
// in order, use an array:

j2c([
  {border: "solid 1px grey"},
  {border_left: "dashed 3px green"}
])

*/})
  }
]

pages.forEach(function(p){
  p.original = p.code;
})

var initial_js = pages[0].code

var PGM = {
    controller: function() {
        var self = this,
            count = 0

        self.page = m.prop(pages[0])

        function loadDeps() {
            count += 1;
            if (count == self.deps.length) {
                self.loaded = true;
                m.redraw();
            }
        }

        self.deps = [
            "codemirror.js",
            "javascript.js",
            "css.js",
            "cssbeautify.js"
        ].map(function(script){
            return m("script", {
                async:false,
                src:script,
                onload:loadDeps
            })
        })
        self.deps.unshift(
            m("link", {
                itemprop:"stylesheet", rel:"stylesheet",
                href:"codemirror.css",
                onload:loadDeps
            })
        )

        self.css_output=""
        self.runcode = function(code) {
            var ok = true, res;
            try{
                res = new Function(
                  'j2c', 
                  'console', 'alert', 'window', 'document', 'undefined', 
                  "'use strict';  return (" + sanitize(code.getValue()) + ");"
                ).call(null, j2c);
                if ("[object String]" !== {}.toString.call(res)) res = j2c.sheet(res);
                res = cssbeautify(res);
                self.css_output=res;
                self.CSSCode.setValue(res);
            } catch (e) {
                ERRR = e
                self.CSSCode.setValue("/* " + e + " */\n" + self.css_output);
            }
           m.redraw()
        }
        self.showvendors = m.prop(false)
    },
    view:function(ctrl) {
        return [
            ctrl.deps,
            !ctrl.loaded ? m("div", "Loading the editor...") :
            m(".playground", {class: PGM.css.playground}, [
                m('style', PGM.css),
                m("div", {class: PGM.css.menu}, [
                  m("div", {
                    class: PGM.css.arrow, 
                    style: ctrl.cangoback ? "pointer:click" : "color:#888",
                    onclick: ctrl.goback
                  }, m("p", "<")),
                  m("div", {class: PGM.css.select},
                    m("select", [m('option', "Inline stlyes: intro")])
                  ),
                  m("div", {
                    class: PGM.css.arrow, 
                    style: ctrl.cangoforward ? "pointer:click" : "color:#888",
                    onclick: ctrl.goforward
                  }, m("p", ">")),
                ]),
                m(".code", {
                    class: PGM.css.code,
                    config: function(elt, init){
                        if (!init) {
                            ctrl.JSCode = CodeMirror(elt, {
                                value: initial_js,
                                mode:  "javascript"
                            });
                            ctrl.JSCode.on("change", ctrl.runcode)
                        }
                    }
                }),
                m(".CSS", {
                    class: PGM.css.CSS,
                    config: function(elt, init){
                        if (!init) {
                            ctrl.CSSCode = CodeMirror(elt, {
                                value: "",
                                mode:  "css",
                                readOnly:"nocursor"
                            });
                            ctrl.runcode(ctrl.JSCode)
                        }
                    }
                })
            ])
        ]
    },
    css: j2c.scoped({
      playground:pocketgrid.group,
      menu: [
        pocketgrid.nested,
        {
          font_size: "1.6em",
          width:"100%"
        }
      ],
      arrow:[
        pocketgrid.block,
        {
          display:"table-cell",
          height: "2em",
          vertical_align:"middle",
          width: "5%",
          " p": {
            height: "100%",
            margin:"0 auto",
            vertical_align: "middle",
            width: "1em"
          }
        }
      ],
      select: [
        pocketgrid.block,
        {
          vertical_align:"middle",
          width: "90%",
          " select": {
            border: "0px solid #ccc",
            cursor: "pointer",
            font_size: "inherit",
            text_overflow: "ellipsis",
            width: "100%",
            _moz$_webkit$:{appearance:"none"},
            "::-ms-expand":{appearance:"none"}
          }
        }
      ],
    code: [
      pocketgrid.block,
      {
        width:"50%"
      }
    ],
    CSS: [
      pocketgrid.block,
      {
        width:"50%"
      }
    ]
    })
}

m.module(playground, PGM)

})
</script>

</div>
<div class="ghribbon"><a href="https://github.com/pygy/j2c">Fork me on GitHub</a></div>
